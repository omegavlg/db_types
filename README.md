# Домашнее задание к занятию "`Базы данных, их типы`" - `Дедюрин Денис`

---

## Задание 1. СУБД
Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.






1. `Команда для создания зеркальной копии домашней директории пользователя в директорию /tmp/backup`
```
rsync -a --progress ~/ /tmp/backup
```
<img src = "img/001.png" width = 50%>

2. `Исключаем из синхронизации все директории, начинающиеся с точки`
```
rsync -a --progress --filter='- .*/' ~/ /tmp/backup
```
<img src = "img/002.png" width = 50%>

3. `Дополняем команду, чтобы rsync подсчитывал хэш-суммы для всех файлов`

```
rsync -a --progress --checksum --filter='- .*/' ~/ /tmp/backup
```
<img src = "img/003.png" width = 50%>

---

## Задание 2

* Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
* Резервная копия должна быть полностью зеркальной
* Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
* Резервная копия размещается локально, в директории /tmp/backup
* На проверку направить файл crontab и скриншот с результатом работы утилиты.


1. `Скрипт для выполнения задания:`
```
#!/bin/bash

SOURCE_DIR=~

DEST_DIR=/tmp/backup

rsync -a --delete --progress --checksum --filter='- .*/' "$SOURCE_DIR/" "$DEST_DIR/"

if [ $? -eq 0 ]; then
  echo "$(date) - Backup successful" >> /var/log/backup.log
else
  echo "$(date) - Backup failed" >> /var/log/backup.log
fi
```

2. `Добавляем выполнение скрипта в планировщик cron. Открываем файл crontab для редактирования командой crontab -e. Выполнение задачи настроено на выполнения каждый день в полночь`
<img src = "img/004.png" width = 50%>

3. `Чтобы не ждать полуночи, запустим скрипт вручную.`
```
./backup.sh
```
<img src = "img/005.png" width = 50%>

4. `Проверим лог, как отработал скрипт:`
```
cat /var/log/backup.log
```
<img src = "img/006.png" width = 50%>

5. `Умышлено "ломаем" скрипт, чтобы он отработал с ошибкой, и запускаем его повторно.`
<img src = "img/007.png" width = 50%>

6. `Проверим лог, как отработал скрипт:`
<img src = "img/008.png" width = 50%>

`Видим, что скрипт отработал с ошибкой, о чем появилась запись в логе.`
